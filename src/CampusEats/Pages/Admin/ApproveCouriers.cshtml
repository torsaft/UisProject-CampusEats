@page
@model CampusEats.Pages.Admin.ApproveCouriers

<div class="text-center">

	<h1 class="display-4">Approve or Decline Courier Applications</h1>
	<div class="text-left">
		<table class="table  table-striped table-hover">
			<thead>
				<tr>
					<th scope="col">User ID</th>
					<th scope="col">Email</th>
					<th scope="col" class="text-right">Role</th>
					<th scope="col" class="text-right">Request Status</th>
					<th scope="col"></th>
					<th scope="col"></th>
				</tr>
			</thead>
			<tbody>

				@foreach (var user in Model.UserDtos)
				{
					<tr>
						<th scope="row">@user.Id</th>
						<td>@user.Email</td>
						<td class="text-right">
                        @foreach (var role in user.Roles)
                        {
                            @if(user.Roles.Count > 1 & role  != user.Roles[user.Roles.Count - 1])
                            {
                                <p>@role, </p> 
                            }
                            else
                            {
                                <p>@role</p>
                            }
                        }
						<td class="text-right">@user.RequestStatus</td>
						<form method="post">
							<td>
								<button class="btn btn-primary" asp-route-id="@user.Id" asp-route-approve="true"><i class="bi-check-square-fill"></i></button>
							</td>
							<td>
								<button class="btn btn-danger" asp-route-id="@user.Id" asp-route-approve="false"><i class="bi-x-square-fill"></i></button>
							</td>
						</form>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>
